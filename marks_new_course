**** A Code hi ha guia S7-1200 - Modbus Master ***

An Arduino library for calculating a CRC32 checksum.
   https://github.com/bakercp/CRC32

### estructures i protocols de comunicació
- Comunicación RS485 con Arduino (Molt interessant, simplex , half duplex, full duplex)
   http://www.naylampmechatronics.com/blog/37_Comunicaci%C3%B3n-RS485-con-Arduino.html
- Placa relés rs485
   https://es.aliexpress.com/item/12V-RS485-Relay-4CH-Modbus-RTU-PC-UART-Board-for-PLC-Lamp-LED-PTZ-Camera-Control/32756810257.html?spm=a219c.10010108.1000015.9.49154807NUJ977
   https://es.aliexpress.com/item/8CH-dc-12V-Modbus-RTU-RS485-Relay-Module-Switch-Board-for-PLC-Lamp-LED-PTZ-Camera/32812380383.html?src=google&albslr=221722480&isdl=y&aff_short_key=UneMJZVf&source=%7Bifdyn:dyn%7D%7Bifpla:pla%7D%7Bifdbm:DBM&albch=DID%7D&src=google&albch=shopping&acnt=494-037-6276&isdl=y&albcp=652736826&albag=32471627666&slnk=&trgt=68416666751&plac=&crea=es32812380383&netw=g&device=c&mtctp=&gclid=EAIaIQobChMIk_uPw7at2gIVRTPTCh0PSAUkEAQYAiABEgJ60vD_BwE&gclsrc=aw.ds
- Sensor humitat rs485 
   https://es.aliexpress.com/store/product/Q079-USR-SENS-WSD-4-Temperature-Humidity-Module-and-Acquisition-Transmitter-Sensor-Supports-RS485-Interface/1754788_32639988542.html?spm=a219c.search0204.3.8.3b336fccrTe9gB&ws_ab_test=searchweb0_0,searchweb201602_1_10152_10065_10151_10344_10068_10342_10547_10343_10340_5722611_10341_10548_10698_10697_10696_5722911_5722811_10084_5722711_10083_10618_10307_10301_10303_10059_10184_10534_308_100031_10103_441_10624_10623_10622_10621_10620_5723011_5722511,searchweb201603_25,ppcSwitch_4_ppcChannel&algo_expid=895cc49f-2f80-4219-8ac2-f239d92cbb0a-1&algo_pvid=895cc49f-2f80-4219-8ac2-f239d92cbb0a&priceBeautifyAB=0
- https://www.luisllamas.es/arduino-rs485-max485/
- https://es.wikipedia.org/wiki/Modelo_OSI
- Protocol comunicació bàscula(sèrie), vatímetre(modbus), i2c, ... -> emulació sobre arduino
- http://www.simplymodbus.ca/FAQ.htm
- Tunejar protocol mòdul wifi, mandos
- https://sensing.honeywell.com/honeywell-white-paper-communication-protocol-002415-1-en2.pdf
- Slideshare : 
   - https://es.slideshare.net/Ali3041982/communicationprotocols
   - https://es.slideshare.net/GopiA2/communication-protocol-presentation?next_slideshow=1 (dibuixos funcionament protocol pàg. 7 )
- Youtube : Communication protocols
- comunicació sèrie(232) i modbus(485) rtu i tcp
   - trames, int to hex, crc
   - programes python/c#, editar, datalogger (modbus/python amb llibreria i sense)
   - exemple real i proves amb Arduino (caixa amb arduino i sensors i actuadors)
- intro altres protocols, profinet, profibus, as-i,
- https://en.wikipedia.org/wiki/List_of_automation_protocols
- protocol antena wifi, protocol mando
- profibus
   https://www.youtube.com/watch?v=j7wWcJUFPf8
- https://www.youtube.com/watch?v=WsgDtrHPDFg 
- **** https://www.bayt.com/en/specialties/q/112228/what-are-the-famous-communication-protocols-used-in-industrial-field/
    - RS-485 bus work in conditions of strong interference (for example,. Industry) and provides a large transmission ranges ...
- https://www.moxa.com/doc/manual/MGate/MGate_MB3000_Series_Users_Manual_v1.pdf
   MGate MB3000 line of Modbus gateways. All models feature easy integration of Modbus TCP to Modbus RTU/ASCII and feature RS-232/422/485 ports for Modbus serial
   communication
- ******************************************************************************************
- https://www.youtube.com/watch?v=k993tAFRLSE (Understanding Modbus Serial and TCP/IP) *****
- ******************************************************************************************
- http://plc-hmi-scadas.com/TIA_Portal_Modbus_RTU.php
- http://plc-hmi-scadas.com/083.php / Simatic 1200 Servidor ModbusTCP
- RS232/Sèrie 1 a 1 (amb moxa eth puc apuntar a diverser ips), RS485/Modbus 1 Màster i múltiples slaves
- http://www.modbustools.com/modbus_poll.html
- Pràctiques :   
   - Llegir i escriue per port sèrie
      - Exemple "industrial" : bàscula, electrònica/sensor, lector codis de barres
      - https://es.rs-online.com/web/p/products/8104169/?grossPrice=Y&cm_mmc=ES-PLA-_-google-_-PLA_ES_ES_Automatizaci%C3%B3n_Y_Control_De_Procesos-_-Aut%C3%B3matas_Programables_And_Interfaz_Hombre-M%C3%A1quina_Y_Adquisici%C3%B3n_De_Datos&mkwid=s_dc%7cpcrid%7c88860983241%7cpkw%7c%7cpmt%7c%7cprd%7c8104169&gclid=EAIaIQobChMIj6yxoaDu2AIVcCjTCh3f7wheEAQYAiABEgIDl_D_BwE&gclsrc=aw.ds
      - P1 : llegir port sèrie -> lector codi de barres (python)
             https://www.amazon.es/Esc%C3%A1ner-Autom%C3%A1tico-Velocidad-Ajustable-Compatible/dp/B01NBHYTCB/ref=sr_1_3?ie=UTF8&qid=1516879963&sr=8-3&keywords=lector+codigo+barras
      - P2 : enviar comanda i rebre resposta -> bàscula ? (python)
      - http://www.cablematic.es/buscador/modbus/Sensor-de-humedad-y-temperatura-compatible-TTL-RS232-RS485-modelo-USR_hyphen_SENS_hyphen_WSD_hyphen_4/UK81/?pag=1
      - Vatímetre / Communication Protocol / http://www.support-carlogavazzi.se/downloads%5CControls%5CWM30-WM40%20CP%20V2R2%20October%202010.pdf
   - Conversió int to hex, bytes, bits
   - Llegir i escriure modbus
      - P3 : Amb llibreria 
      - P4 : Sense llibreria, write i read (python, pc màster i arduino slave)
   - Llegir i escriure protocol propi
      - Arduino <-> PC
      - PC envia trames i Arduino actua i contesta
      - SOH o STX/Random hash/bloc dades/checksum/ETX  //checksum = xor ^, suma bytes de random hash i bloc de dades
      - SOH-FUNCIO-N_BYTES-BLOC_DADES-CRC-ETX 
          - CRC = SOH+FUNCIO+N_BYTES+BLOC_DADES
          - 1-0-0-02  (funció 0 retorna status)
          - 1-1-100-101-2     (la funció 1 posa l'actuador X a 100 -> crc = 101)
   - Llegir sensor i2C
   - Projecte final
   - Introducción a Siemens Profinet
      - https://www.youtube.com/watch?v=dvHl6daktGY
      
   

### sistemes de control i supervisió de processos
- Teoria, pràctiques entrenament i pràctica final
- HMI i SCADA (wincc i c#)
- HMI alarmes
- Integració amb ERP (http://flexmaint.com, gestió incidències free)
- Runtime WinCC amb més funcions (gràfiques, logs, widgets, creació d'informes)
- sense as-i ?
- explicar altres solucions, panel pc, terminals mòbils, ...
- opc server, activeX, ...
- Snap7, libnodave, ...
- web i base de dades, mail
- PLC Omron ?
- Vincular PLC A Programes de gestió del manteniment, ERP, ...
- Pràctiques :
   - HMI :
      - supervisió i control bàsic
      - textos, imatges, animacions, widgets
      - alarmes
      - gestió usuaris
      - variables internes      
      - receptes ?
   - Web
   - App ?
   - SCADA 
      - WinCC
         - supervisió i control
         - notificacions : mail, telegram, gdrive
         - base de dades
         - scripts segons events (límit superat, temporitzador, ...)
      - C#
         - ídem wincc
   - Modbus Visual
      - Modbus free
      - Sharpdevelop/Visual 

### xarxes industrials
- As-i
   - 1 esclau
   - 2 esclaus
- Modbus
   - rtu
      - master - llegir i escriure d'esclau (recuperador, plc)
      - slave - plc o pc llegeix i escriu a esclau (només holdings - altres registre dins de holdings)
   - tcp
- Profinet
   - plc 1200 llegeix entrades d'un altre plc i activa sortides d'un altre plc
- Profibus ?
- Gateway ?

- S7 1200 - Modbus TCP Master
   https://plc-hmi-scadas.com/083.php
- DB9 MODBUS
   https://www.ebay.com/itm/5-set-Serial-RS232-DB9-9-PIN-MALE-Assembly-Solder-Plug-Connector-with-Shell/331102857652?hash=item4d1744a9b4
   https://www.amazon.es/Adapter-Signale-Klemme-Breakout-Plastikabdeckung-Schraube/dp/B017M4QWIA/ref=sr_1_1?s=electronics&ie=UTF8&qid=1522855361&sr=1-1&keywords=db9&th=1
-  Per que SI ES CONFIGURA COM A ESCLAU, NOMÉS POT LLEGIR I ESCRIRE HOLDING REGISTERS
   https://support.industry.siemens.com/tf/WW/en/posts/please-help-modbus-rtu-slave-s7-1200-giving-address/154550?page=0&pageSize=10
   Modbus RTU Slave protocol is only partially implemented in the S7-1200. Only the read and write of registers 40001 ++ is implemented.
   There is nothing else you can do, unless you create the coding to implement more Modbus functionality. 
   https://support.industry.siemens.com/tf/ww/en/posts/how-to-organize-the-register-in-the-slave-modbus-rtu-slave-s7-1200/170045/?page=0&pageSize=10
- Compressors Atlas Copco que porten Modbus
   https://www.atlascopco.com/es-pa/compressors/products/Medical_gas_equipment/es_medical_central_controller
   http://read.pudn.com/downloads156/doc/comm/696115/UserGuideMkIVModbus01.pdf
- http://bibing.us.es/proyectos/abreproy/11676/fichero/Volumen+1%252FAnexo.pdf
- Using an S7-1200 PLC as a Modbus TCP Slave
   https://www.dmcinfo.com/latest-thinking/blog/id/8869/using-an-s7-1200-plc-as-a-modbus-tcp-slave
- Manual S7-1200 
   https://support.industry.siemens.com/cs/attachments/107623221/s71200_system_manual_en-US_en-US.pdf?download=true
   Pàg. 1265 Config Modbus
- TIA Portal v13 - Clase 6 - Modbus RTU S7 1200 Slave 
   https://www.youtube.com/watch?v=5Le6vOlnDOg
- Muntatge des de zero : plc, font, master as-i, mòdul mòdbus, alimentació, ...,
- S7-1200 Modbus com a màster -> llegir i escriure de recuperador
- S7-1200 Modbus com a esclau. Llavors des d'un master (PC o PLC) llegir i escriure d'aquest esclau.
- Examen a meitat de curs
- Piràmide comunicacions, Busos industrials (Ethernet industrial, profibus, ...)
- Bus As-i (configurar múltiples esclaus)
- Tipologies de xarxa
- Profibus ?
- Intercanvi de dades entre PLC's -> PUT/GET
   - https://www.youtube.com/watch?v=X9D6haMjEyg&index=13&list=PL6w-_JQPzf2HFRKxCyfPmszm5EmNRc83e
   - https://www.youtube.com/watch?v=KVxcMKJnwIQ&index=14&list=PL6w-_JQPzf2HFRKxCyfPmszm5EmNRc83e
- Buffer diagnòstic
- Simular avaríes (ip errònea, cable eth desconnectat, plc model incorrecte, etc)
- Gateway, router
   - https://www.expertdaq.es/conversor/conversor-usb-rs485rs422/ex9530/?gclid=EAIaIQobChMI84GTs63h2AIVpp3tCh3htgGsEAYYASABEgKW4fD_BwE
   - moxa rs232 a eth
   - Conversors Moxa https://www.moxa.com/product/NPort_DE-211.htm , etc
   - http://www.matrix.es/networking-industrial
   - http://www.matrix.es/networking-industrial/switches-industriales/extensores-ethernet
   - http://mtxm2m.com/product/router/mtx-router-titan-3g
   - Raspberry, lectura modbus i enviar cloud via http
- Wifi industrial
- http://www.can-think.com.tw/ezportal/hyfiles/info/197_file199.pdf
- https://www2.ulpgc.es/hege/almacen/download/31/31119/asitutorial.pdf
- http://www.ti.com/lit/sl/slyy050b/slyy050b.pdf
- https://library.automationdirect.com/plc-communications-coming-of-age/
- https://library.automationdirect.com/industrial-ethernet-or-fieldbus-network/
- https://www.youtube.com/watch?v=Al-deBn0ywU
- https://www.youtube.com/watch?v=OvRD2UvrHjE (RealTimeAutomation channel)
- https://www.youtube.com/watch?v=6K2Y_sp5f4o (Industrial Networks Fundamentals)  
- https://es.slideshare.net/johnpir/profibus-dp-55706968?qid=472468fb-55c6-415f-a158-ec352ff1a225&v=&b=&from_search=1
- http://www.infoplc.net/blogs-automatizacion/item/103031-razones-aprender-codesys
- https://www.youtube.com/watch?v=_JIqMyWdLvg
- http://www.infoplc.net/descargas/103-siemens/automatas/s7-1200/2662-comunicacion-wireless-automatas-siemens-s7-1200
- https://www.industry.siemens.com/home/aan/es/ecuador/Documents/Profinet%20wireless.pdf
- S7-1200 MODBUS : https://www.plc-city.com/shop/es/siemens-simatic-s7-1200-communication-modules/6es7241-1ch32-0xb0.html?gmc_currency=1&gclid=EAIaIQobChMI-5b7v6n92AIVISjTCh3yUAD0EAYYASABEgLeNfD_BwE
- S7-1200 RFID : https://support.industry.siemens.com/cs/document/109483416/rfid-basic-examples?dti=0&lc=en-US
   - http://w3.siemens.com/mcms/identification-systems/en/rfid-systems/pages/rfid-systems.aspx
- INDICADOR DE PESO RS232 CON MODULO CM1214 RS232 Y PLC S7 1200 DE SIEMENS
   - https://www.youtube.com/watch?v=-xgNOuslGuw
- S7-1200/S7-1500: How to receive a string from a PC using CM1241 RS232
   - https://www.youtube.com/watch?v=CylkADDOwwk
- Canal Youtube Industrial Networks https://www.youtube.com/channel/UCpBzhgHMA4fccaFbTlYadQQ
- HMI with C# and WPF part 3: communication with multiple PLC (S7 and Modbus) - Mesta Automation
 - https://www.youtube.com/watch?v=26tzSJDpbvE
- http://w3.siemens.com/mcms/pc-based-automation/en/industrial-iot/pages/default.aspx 
- https://programacionsiemens.com/como-crear-un-proyecto-con-periferia-descentralizada/
- https://www.youtube.com/watch?v=NQnjEsoktTw
- Pràctiques :
   - Muntatge des de zero, plc ,font, switch, ...
   - As-i
      - Configurar
      - Canvi adreces i xarxa amb múltiples esclaus
   - Intercanvi de dades entre PLCs
      - http://www.infoplc.net/descargas/103-siemens/automatas/s7-1200/2259-comunicacion-profinet-s7-1200 (bona explicació ethernet industrial)
   
### sistemes d'accés remot a processos industrials
- Remote Automation : https://www.moxa.com/Remote_Automation/index.aspx
- http://mtxm2m.com/product/router/mtx-router-titan-3g (www.matrix.es)
- ftp://ftp.matrix.es/mtxm2m/Routers%20M2M/MTX-Router-Titan/Aplication_notes_ESpa%C3%B1ol/
- https://programacionsiemens.com/como-conectar-un-plc-siemens-con-telegram/
- VPN
- Telegram, mail
- Cloud
- SSL, TLS, https
- NAT -> IP webserver : PORT
- Wifi industrial
- App phonegap
- Revolution pi
- Siemens Iot 2020
- Iot
- Exemple pràctica : Senyal activa a ciutat A envia dada al núvol. A ciutat B, pc monitoritza núvol i activa relé
- Passarela modbus cap al núvol
- Pushing Data from S7-1200 to Cloud
   https://es.slideshare.net/DMCChicago/pushing-data-from-s71200-to-cloud
- MQTT Publisher for SIMATIC CPU
   https://support.industry.siemens.com/cs/document/109748872/mqtt-publisher-for-simatic-cpu?dti=0&lc=en-WW
- MQTT Publisher (unencrypted) for the S7-1500/ S7-1200 and S7-300
   https://cache.industry.siemens.com/dl/files/872/109748872/att_942403/v1/109748872_MqttClient_Publish_Unsecure_DOKU_en.pdf
- Sending Data from Siemens S7 PLC to MQTT Client (Demo)
   https://www.youtube.com/watch?v=KGaa_cgcyCI
- Conexión directa S7-1200 o S7-1500 con la nube de DarwinData
   http://www.infoplc.net/noticias/item/104421-conexion-directa-siemens-s7-1200-s7-1500-nube-darwindata
- Siemens S7 IoT - Industrial Internet of Things Siemens S7 Communication Driver
   https://www.youtube.com/watch?v=9fh7C6TuP2k
- TCR200 equipo de telecontrol y telemetría vía GSM/ GPRS
   https://tienda.rtcautomatismos.com/buscar?controller=search&orderby=position&orderway=desc&search_query=modbus
- Q064 USR-GPRS232-730 Serial RS232/RS485 al Convertidor de Módems GSM GPRS DTU Servidor TCP y UDP Compatibles de Control de Flujo
   https://es.aliexpress.com/store/product/Q048-USR-GPRS232-730-GPRS-DTU-Serial-RS232-RS485-to-GSM-Server-TCP-and-UDP-Supported/1754788_32639464041.html?spm=a219c.search0204.3.14.3b336fccrTe9gB&ws_ab_test=searchweb0_0%2Csearchweb201602_1_10152_10065_10151_10344_10068_10342_10547_10343_10340_5722611_10341_10548_10698_10697_10696_5722911_5722811_10084_5722711_10083_10618_10307_10301_10303_10059_10184_10534_308_100031_10103_441_10624_10623_10622_10621_10620_5723011_5722511%2Csearchweb201603_25%2CppcSwitch_4_ppcChannel&algo_expid=895cc49f-2f80-4219-8ac2-f239d92cbb0a-2&algo_pvid=895cc49f-2f80-4219-8ac2-f239d92cbb0a&priceBeautifyAB=0
